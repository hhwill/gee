<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>账单总览</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
    <style type="text/css">
        *{
            margin: 0;
            padding: 0;
        }
        .total{
            background: #4e6ef2;
        }
        .total_t{
            height: 80px;
            padding: 15px 0;
            box-sizing: border-box;
        }
        .total_t .total_t_l{
            width: 45%;
            box-sizing: border-box;
            height: 50px;
            display: block;
            float: left;
            padding: 0 20px;
            line-height: 25px;
            font-size: 16px;
            color: #fff;
        }
        .total_t .total_t_r{
            width: 55%;
            box-sizing: border-box;
            height: 50px;
            display: block;
            float: right;
            padding: 0 20px;
            line-height: 50px;
            font-size: 12px;
            text-align: right;
            color: #fff;
        }
        .total_b{
            height: 60px;
        }
        .total_b p{
            line-height: 30px;
            padding: 0 20px;
            font-size: 14px;
            color: #a9a9a9;
            box-sizing: border-box;
        }
        .ulList{
            list-style: none;
        }
        .ulList li:nth-of-type(odd){
            height: 60px;
            display: block;
            box-sizing: border-box;
            padding: 0 20px;
            background: #fff;
        }
        .ulList li:nth-of-type(even){
            height: 60px;
            display: block;
            box-sizing: border-box;
            padding: 0 20px;
            background: #f5f5f5;
        }
        .ulList li .list_l{
            width: 30%;
            height: 60px;
            display: block;
            float: left;
            line-height: 30px;
            font-size: 14px;
            color: #666;
        }
        .ulList li .list_r{
            width: 65%;
            height: 60px;
            display: block;
            float: right;
            line-height: 30px;
            font-size: 14px;
            color: #666;
        }
        .ulList li .list_r span{
            width: 100%;
            height: 30px;
            display: inline-block;
            line-height: 30px;
            font-size: 14px;
            color: #999;
            text-align: right;
        }
    </style>
</head>
<body>
<div class="total">
    <div class="total_t">
        <p class="total_t_l">当前总余额<br>Total Balance Now</p>
        <p class="total_t_r" id="date"></p>
    </div>
    <div class="total_b">
        <p id="total_cny_amount"></p>
        <p id="total_usd_amount"></p>
    </div>
</div>
<ul class="ulList" id="li_accounts">
    <!--<li>-->
        <!--<p class="list_l">工商银行<br>ICBC</p>-->
        <!--<p class="list_r" onclick="goAccount('111')">-->
            <!--<span>CNY:1,234,567</span>-->
            <!--<span>USD: 3,567</span>-->
        <!--</p>-->
    <!--</li>-->
    <!--<li>-->
        <!--<p class="list_l">工商银行<br>ICBC</p>-->
        <!--<p class="list_r">-->
            <!--<span>CNY:1,234,567</span>-->
        <!--</p>-->
    <!--</li>-->
</ul>
</body>

<script>
    setInterval(function(){
            var date=new Date();
            var year=date.getFullYear(); //获取当前年份
            var mon=date.getMonth()+1; //获取当前月份
            var da=date.getDate(); //获取当前日
            var day=date.getDay(); //获取当前星期几
            var h=date.getHours(); //获取小时
            var m=date.getMinutes(); //获取分钟
            var s=date.getSeconds(); //获取秒
            var d=document.getElementById('date');
            d.innerHTML=year+'年'+mon+'月'+da+'日'+' '+h+':'+m+':'+s; },
        1000)

    $.post("/gee/msg/total.json", function(data) {
        console.log(data);
        var res = data.result;

        $("#total_cny_amount").html("Total CNY Amount: " + res.balance);
        $("#total_usd_amount").html("Total USD Amount: " + res.ubalance);

        var accounts = res.accounts;
        var accountsHtml= "";

        for (var i=0;i<accounts.length;i++) {
            var account = accounts[i];

            accountsHtml += "<li>";
            accountsHtml += "<p class=\"list_l\" id='"+account.accountId+"' onclick='goAccount(this)'>"+account.bankname+"</p>";
            accountsHtml += "<p class=\"list_r\">";
            accountsHtml += "<span>CNY:"+account.balance+"</span>";
            accountsHtml += "<span>USD:"+account.ubalance+"</span>";
            accountsHtml += "</p>";
            accountsHtml += "</li>";
        }
        $("#li_accounts").html(accountsHtml);
    });


    function goAccount(obj) {
        var accountId = $(obj).attr("id");
        window.location = "/gee/msg/account.html?accountId=" + accountId;
    }


</script>
</html>